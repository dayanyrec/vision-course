// This is sketchy code - devise your own implementation
for i=1:height
  for i=1:width
      // Ceck pixel value of I(i,j) against threshold
      // Act accordingly
  end
end

// Please also provide faster implementations than explicit for loops.
